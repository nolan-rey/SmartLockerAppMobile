<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SmartLockerApp.Views.HistoryPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Historique"
             BackgroundColor="#F8FAFC">

    <Grid>
        <!-- Header with Navigation -->
        <Border Style="{StaticResource NavigationHeader}">
            <Grid Style="{StaticResource MobileContentContainer}" Padding="0,20">
                <StackLayout Orientation="Horizontal" VerticalOptions="Center" Spacing="16">
                    <Button x:Name="BackButton" 
                            Style="{StaticResource BackButton}"
                            Clicked="BackButton_Clicked"/>
                    <Label Text="Historique" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           VerticalOptions="Center"
                           TextColor="Black"/>
                </StackLayout>
            </Grid>
        </Border>
        
        <!-- Content -->
        <ScrollView Margin="0,100,0,0">
            <StackLayout Style="{StaticResource MobileScrollContent}">
                
                <!-- Filter Buttons -->
                <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Margin="0,0,0,20">
                    <Button x:Name="AllButton" 
                            Text="Tout" 
                            BackgroundColor="#2563EB" 
                            TextColor="White" 
                            FontSize="14" 
                            CornerRadius="20" 
                            Padding="16,8" 
                            Margin="0,0,8,0"
                            Clicked="FilterButton_Clicked"/>
                    
                    <Button x:Name="CompletedButton" 
                            Text="Terminées" 
                            BackgroundColor="Transparent" 
                            TextColor="#64748B" 
                            FontSize="14" 
                            CornerRadius="20" 
                            Padding="16,8" 
                            BorderWidth="1"
                            BorderColor="#E2E8F0"
                            Margin="0,0,8,0"
                            Clicked="FilterButton_Clicked"/>
                    
                    <Button x:Name="ActiveButton" 
                            Text="Actives" 
                            BackgroundColor="Transparent" 
                            TextColor="#64748B" 
                            FontSize="14" 
                            CornerRadius="20" 
                            Padding="16,8" 
                            BorderWidth="1"
                            BorderColor="#E2E8F0"
                            Clicked="FilterButton_Clicked"/>
                </StackLayout>
                
                <!-- History List -->
                <StackLayout x:Name="HistoryContainer">
                    
                    <!-- Session 1 -->
                    <Border BackgroundColor="White" 
                            StrokeThickness="0"
                            Padding="20" 
                            Margin="0,0,0,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                        </Border.Shadow>
                        
                        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                            
                            <StackLayout Grid.Row="0" Grid.Column="0" Orientation="Horizontal">
                                <Label Text="Casier A-12" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                                <Border BackgroundColor="#10B981" 
                                        StrokeThickness="0"
                                        Padding="8,4" 
                                        Margin="8,0,0,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="Terminée" FontSize="12" TextColor="White" FontAttributes="Bold"/>
                                </Border>
                            </StackLayout>
                            
                            <Label Grid.Row="0" Grid.Column="1" Text="€5.00" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                            
                            <Label Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="15 Nov 2024 • 14:30 - 16:30 (2h)" FontSize="14" TextColor="#64748B" Margin="0,4,0,0"/>
                            
                            <Label Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="Session terminée avec succès" FontSize="12" TextColor="#10B981" Margin="0,8,0,0"/>
                        </Grid>
                    </Border>
                    
                    <!-- Session 2 -->
                    <Border BackgroundColor="White" 
                            StrokeThickness="0"
                            Padding="20" 
                            Margin="0,0,0,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                        </Border.Shadow>
                        
                        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                            
                            <StackLayout Grid.Row="0" Grid.Column="0" Orientation="Horizontal">
                                <Label Text="Casier B-05" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                                <Border BackgroundColor="#F59E0B" 
                                        StrokeThickness="0"
                                        Padding="8,4" 
                                        Margin="8,0,0,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="En cours" FontSize="12" TextColor="White" FontAttributes="Bold"/>
                                </Border>
                            </StackLayout>
                            
                            <Label Grid.Row="0" Grid.Column="1" Text="€3.50" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                            
                            <Label Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="14 Nov 2024 • 09:15 - 11:15 (2h)" FontSize="14" TextColor="#64748B" Margin="0,4,0,0"/>
                            
                            <Label Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="Temps restant: 1h 30min" FontSize="12" TextColor="#F59E0B" Margin="0,8,0,0"/>
                        </Grid>
                    </Border>
                    
                    <!-- Session 3 -->
                    <Border BackgroundColor="White" 
                            StrokeThickness="0"
                            Padding="20" 
                            Margin="0,0,0,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                        </Border.Shadow>
                        
                        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                            
                            <StackLayout Grid.Row="0" Grid.Column="0" Orientation="Horizontal">
                                <Label Text="Casier C-08" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                                <Border BackgroundColor="#10B981" 
                                        StrokeThickness="0"
                                        Padding="8,4" 
                                        Margin="8,0,0,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="Terminée" FontSize="12" TextColor="White" FontAttributes="Bold"/>
                                </Border>
                            </StackLayout>
                            
                            <Label Grid.Row="0" Grid.Column="1" Text="€2.50" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                            
                            <Label Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="13 Nov 2024 • 16:00 - 17:30 (1h30)" FontSize="14" TextColor="#64748B" Margin="0,4,0,0"/>
                            
                            <Label Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="Session terminée avec succès" FontSize="12" TextColor="#10B981" Margin="0,8,0,0"/>
                        </Grid>
                    </Border>
                    
                    <!-- Session 4 -->
                    <Border BackgroundColor="White" 
                            StrokeThickness="0"
                            Padding="20" 
                            Margin="0,0,0,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                        </Border.Shadow>
                        
                        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                            
                            <StackLayout Grid.Row="0" Grid.Column="0" Orientation="Horizontal">
                                <Label Text="Casier A-03" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                                <Border BackgroundColor="#EF4444" 
                                        StrokeThickness="0"
                                        Padding="8,4" 
                                        Margin="8,0,0,0">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="12"/>
                                    </Border.StrokeShape>
                                    <Label Text="Expirée" FontSize="12" TextColor="White" FontAttributes="Bold"/>
                                </Border>
                            </StackLayout>
                            
                            <Label Grid.Row="0" Grid.Column="1" Text="€7.50" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                            
                            <Label Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Text="12 Nov 2024 • 10:00 - 13:00 (3h)" FontSize="14" TextColor="#64748B" Margin="0,4,0,0"/>
                            
                            <Label Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Text="Session expirée - frais supplémentaires appliqués" FontSize="12" TextColor="#EF4444" Margin="0,8,0,0"/>
                        </Grid>
                    </Border>
                </StackLayout>
                
                <!-- Load More Button -->
                <Button x:Name="LoadMoreButton" 
                        Text="Charger plus"
                        BackgroundColor="Transparent" 
                        TextColor="#2563EB" 
                        FontSize="16" 
                        HeightRequest="48" 
                        BorderWidth="1" 
                        BorderColor="#E2E8F0"
                        CornerRadius="8" 
                        Margin="0,20,0,0"
                        Clicked="LoadMoreButton_Clicked"/>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
