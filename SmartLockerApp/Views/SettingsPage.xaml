<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="SmartLockerApp.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Paramètres"
             BackgroundColor="#F8FAFC">

    <Grid>
        <!-- Header with Navigation -->
        <Border Style="{StaticResource NavigationHeader}">
            <Grid Style="{StaticResource MobileContentContainer}" Padding="0,20">
                <StackLayout Orientation="Horizontal" VerticalOptions="Center" Spacing="16">
                    <Button x:Name="BackButton" 
                            Style="{StaticResource BackButton}"
                            Clicked="BackButton_Clicked"/>
                    <Label Text="Paramètres" 
                           FontSize="18" 
                           FontAttributes="Bold" 
                           VerticalOptions="Center" 
                           TextColor="Black"/>
                </StackLayout>
            </Grid>
        </Border>
        
        <!-- Content -->
        <ScrollView Margin="0,100,0,0">
            <StackLayout Style="{StaticResource MobileScrollContent}">
                
                <!-- Profile Section -->
                <Border BackgroundColor="White" 
                        StrokeThickness="0"
                        Padding="24" 
                        Margin="0,0,0,20">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.1" Radius="20" Offset="0,4"/>
                    </Border.Shadow>
                    
                    <StackLayout>
                        <Label Text="Profil" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="#1E293B" 
                               Margin="0,0,0,16"/>
                        
                        <!-- Profile Info -->
                        <Grid ColumnDefinitions="Auto,*,Auto" Margin="0,0,0,16">
                            <Border Grid.Column="0" 
                                    BackgroundColor="#2563EB" 
                                    WidthRequest="50" 
                                    HeightRequest="50" 
                                    StrokeThickness="0"
                                    Margin="0,0,16,0">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="25"/>
                                </Border.StrokeShape>
                                <Label Text="JD" FontSize="18" FontAttributes="Bold" TextColor="White" HorizontalOptions="Center" VerticalOptions="Center"/>
                            </Border>
                            
                            <StackLayout Grid.Column="1" VerticalOptions="Center">
                                <Label Text="John Doe" FontSize="16" FontAttributes="Bold" TextColor="#1E293B"/>
                                <Label Text="john.doe@example.com" FontSize="14" TextColor="#64748B"/>
                            </StackLayout>
                            
                            <Button Grid.Column="2" 
                                    Text="Modifier" 
                                    BackgroundColor="Transparent" 
                                    TextColor="#2563EB" 
                                    FontSize="14" 
                                    BorderWidth="1" 
                                    BorderColor="#2563EB"
                                    CornerRadius="6" 
                                    Padding="12,6"
                                    Clicked="EditProfileButton_Clicked"/>
                        </Grid>
                    </StackLayout>
                </Border>
                
                <!-- Preferences Section -->
                <Border BackgroundColor="White" 
                        StrokeThickness="0"
                        Padding="24" 
                        Margin="0,0,0,20">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                    </Border.Shadow>
                    
                    <StackLayout>
                        <Label Text="Préférences" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="#1E293B" 
                               Margin="0,0,0,16"/>
                        
                        <!-- Notifications -->
                        <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,16">
                            <StackLayout Grid.Column="0">
                                <Label Text="Notifications push" FontSize="16" TextColor="#1E293B"/>
                                <Label Text="Recevoir des alertes sur votre téléphone" FontSize="14" TextColor="#64748B"/>
                            </StackLayout>
                            <Switch Grid.Column="1" x:Name="NotificationsSwitch" IsToggled="True" OnColor="#2563EB" VerticalOptions="Center"/>
                        </Grid>
                        
                        <!-- Email Notifications -->
                        <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,16">
                            <StackLayout Grid.Column="0">
                                <Label Text="Notifications email" FontSize="16" TextColor="#1E293B"/>
                                <Label Text="Recevoir des emails de confirmation" FontSize="14" TextColor="#64748B"/>
                            </StackLayout>
                            <Switch Grid.Column="1" x:Name="EmailSwitch" IsToggled="False" OnColor="#2563EB" VerticalOptions="Center"/>
                        </Grid>
                        
                        <!-- Auto-lock -->
                        <Grid ColumnDefinitions="*,Auto">
                            <StackLayout Grid.Column="0">
                                <Label Text="Verrouillage automatique" FontSize="16" TextColor="#1E293B"/>
                                <Label Text="Verrouiller automatiquement après dépôt" FontSize="14" TextColor="#64748B"/>
                            </StackLayout>
                            <Switch Grid.Column="1" x:Name="AutoLockSwitch" IsToggled="True" OnColor="#2563EB" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>
                </Border>
                
                <!-- Security Section -->
                <Border BackgroundColor="White" 
                        StrokeThickness="0"
                        Padding="24" 
                        Margin="0,0,0,20">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                    </Border.Shadow>
                    
                    <StackLayout>
                        <Label Text="Sécurité" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="#1E293B" 
                               Margin="0,0,0,16"/>
                        
                        <!-- Change Password -->
                        <Border BackgroundColor="Transparent" 
                                StrokeThickness="0"
                                Padding="0,12">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="ChangePasswordButton_Tapped"/>
                            </Border.GestureRecognizers>
                            
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0" Text="Changer le mot de passe" FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text=">" FontSize="18" TextColor="#64748B" VerticalOptions="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- Biometric -->
                        <Grid ColumnDefinitions="*,Auto" Margin="0,12,0,0">
                            <StackLayout Grid.Column="0">
                                <Label Text="Authentification biométrique" FontSize="16" TextColor="#1E293B"/>
                                <Label Text="Utiliser Touch ID ou Face ID" FontSize="14" TextColor="#64748B"/>
                            </StackLayout>
                            <Switch Grid.Column="1" x:Name="BiometricSwitch" IsToggled="True" OnColor="#2563EB" VerticalOptions="Center"/>
                        </Grid>
                    </StackLayout>
                </Border>
                
                <!-- Support Section -->
                <Border BackgroundColor="White" 
                        StrokeThickness="0"
                        Padding="24" 
                        Margin="0,0,0,20">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                    </Border.Shadow>
                    
                    <StackLayout>
                        <Label Text="Support" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="#1E293B" 
                               Margin="0,0,0,16"/>
                        
                        <!-- Help -->
                        <Border BackgroundColor="Transparent" 
                                StrokeThickness="0"
                                Padding="0,12"
                                Margin="0,0,0,8">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="HelpButton_Tapped"/>
                            </Border.GestureRecognizers>
                            
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0" Text="Aide et tutoriels" FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text=">" FontSize="18" TextColor="#64748B" VerticalOptions="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- Contact -->
                        <Border BackgroundColor="Transparent" 
                                StrokeThickness="0"
                                Padding="0,12"
                                Margin="0,0,0,8">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="ContactButton_Tapped"/>
                            </Border.GestureRecognizers>
                            
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0" Text="Contacter le support" FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text=">" FontSize="18" TextColor="#64748B" VerticalOptions="Center"/>
                            </Grid>
                        </Border>
                        
                        <!-- About -->
                        <Border BackgroundColor="Transparent" 
                                StrokeThickness="0"
                                Padding="0,12">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="AboutButton_Tapped"/>
                            </Border.GestureRecognizers>
                            
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0" Text="À propos" FontSize="16" TextColor="#1E293B" VerticalOptions="Center"/>
                                <Label Grid.Column="1" Text=">" FontSize="18" TextColor="#64748B" VerticalOptions="Center"/>
                            </Grid>
                        </Border>
                    </StackLayout>
                </Border>
                
                <!-- Logout Button -->
                <Button x:Name="LogoutButton" 
                        Text="Se déconnecter"
                        BackgroundColor="Transparent" 
                        TextColor="#EF4444" 
                        FontSize="16" 
                        HeightRequest="48" 
                        BorderWidth="1" 
                        BorderColor="#FEE2E2"
                        CornerRadius="8" 
                        Margin="0,0,0,20"
                        Clicked="LogoutButton_Clicked"/>
                
                <!-- App Info Section -->
                <Border BackgroundColor="White" 
                        StrokeThickness="0"
                        Padding="24" 
                        Margin="0,0,0,20">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="16"/>
                    </Border.StrokeShape>
                    <Border.Shadow>
                        <Shadow Brush="Black" Opacity="0.05" Radius="10" Offset="0,2"/>
                    </Border.Shadow>
                    
                    <StackLayout HorizontalOptions="Center" Spacing="16">
                        <Border WidthRequest="100" 
                                HeightRequest="100"
                                HorizontalOptions="Center"
                                BackgroundColor="Transparent"
                                Padding="10">
                            <Image Source="smartlocker_logo.svg" 
                                   HorizontalOptions="Center"
                                   VerticalOptions="Center"
                                   Aspect="AspectFit"/>
                        </Border>
                        
                        <StackLayout HorizontalOptions="Center" Spacing="4">
                            <Label Text="SmartLocker" 
                                   FontSize="20" 
                                   FontAttributes="Bold" 
                                   HorizontalOptions="Center"
                                   TextColor="#2563EB"/>
                            <Label Text="Version 1.0.0" 
                                   FontSize="14" 
                                   TextColor="#64748B" 
                                   HorizontalOptions="Center"/>
                            <Label Text="© 2024 SmartLocker. Tous droits réservés." 
                                   FontSize="12" 
                                   TextColor="#9CA3AF" 
                                   HorizontalOptions="Center"
                                   Margin="0,8,0,0"/>
                        </StackLayout>
                    </StackLayout>
                </Border>
            </StackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
